<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Indian Art History — Interactive Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    :root{
      --bg:#0b0d12;
      --panel:#0f1320;
      --panel2:#141a2a;
      --text:#e6e9ef;
      --muted:#9aa4bf;
      --primary:#5b8cff;
      --outline:#233055;
      --chip:#1b2338;
      --chip-on:#2a3a64;
      --chip-border:#2b3658;
      --accent:#7dd3fc;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
      color:var(--text);
      background:linear-gradient(120deg,#0b0d12,#0d1018 40%,#0b0d12);
      height:100vh;
      display:grid;
      grid-template-columns: 1fr 2fr;
    }
    @media (max-width: 1024px){
      body{ grid-template-columns: 1fr; grid-template-rows: 52vh 48vh; }
    }

    /* Sidebar */
    .sidebar{
      border-right:1px solid var(--outline);
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .title-row{display:flex;align-items:center;gap:8px}
    .title-row svg{width:18px;height:18px;opacity:.9}
    h1{font-size:18px;margin:0}
    .controls{display:flex;gap:8px}
    .input{
      flex:1;
      background:#0c1120;
      color:var(--text);
      border:1px solid var(--chip-border);
      border-radius:12px;
      padding:10px 12px;
      outline:none;
    }
    .btn{
      background:var(--chip);
      color:var(--text);
      border:1px solid var(--chip-border);
      border-radius:12px;
      padding:10px 12px;
      cursor:pointer;
    }
    .btn:hover{border-color:var(--accent)}
    .card{border:1px solid var(--outline);border-radius:16px;background:#0d1220}
    .card .hd{padding:10px 12px;border-bottom:1px solid var(--outline);font-size:13px;color:var(--muted)}
    .card .bd{padding:10px;display:flex;flex-wrap:wrap;gap:8px}

    .chip{
      font-size:12px;
      padding:6px 10px;
      border:1px solid var(--chip-border);
      background:var(--chip);
      border-radius:999px;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{ background:var(--chip-on); border-color:var(--primary); color:#fff; }

    .count{font-size:12px;color:var(--muted);margin:0 2px}
    .list{overflow:auto;min-height:0;flex:1}
    .site{
      display:flex;gap:10px;padding:10px;border:1px solid var(--outline);
      background:#0c1120;border-radius:14px;margin-bottom:8px;cursor:pointer
    }
    .site:hover{border-color:var(--accent)}
    .site .name{font-weight:600}
    .site .meta{font-size:12px;color:var(--muted)}
    .badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
    .badge{font-size:10px;border:1px solid var(--chip-border);padding:3px 6px;border-radius:999px;background:#0a0f1c}

    /* Map */
    #map{width:100%;height:100vh}
    @media (max-width: 1024px){ #map{height:100%} }

    .leaflet-popup-content-wrapper{border-radius:12px}
    .popup-img{width:100%;height:120px;object-fit:cover;border-radius:8px;margin-bottom:6px}
    .focus-btn{
      display:inline-block;margin-top:6px;padding:6px 10px;border-radius:8px;border:1px solid var(--chip-border);
      background:var(--chip);color:var(--text);text-decoration:none;cursor:pointer
    }

    /* Custom map styling */
    .leaflet-container {
      background: #f8f9fa;
    }
    
    .leaflet-control-zoom {
      border: 1px solid var(--outline) !important;
      background: var(--panel) !important;
    }
    
    .leaflet-control-zoom a {
      background: var(--chip) !important;
      color: var(--text) !important;
      border: 1px solid var(--chip-border) !important;
    }
    
    .leaflet-control-zoom a:hover {
      background: var(--chip-on) !important;
      border-color: var(--accent) !important;
    }
    
    .leaflet-popup-content-wrapper {
      background: var(--panel) !important;
      border: 1px solid var(--outline) !important;
      color: var(--text) !important;
    }
    
    .leaflet-popup-tip {
      background: var(--panel) !important;
      border: 1px solid var(--outline) !important;
    }
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="title-row">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2l3 7 7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1z" stroke-width="1.5"/></svg>
      <h1>Indian Art History — Interactive Map</h1>
    </div>

    <div class="controls">
      <input id="search" class="input" placeholder="Search locations, styles, cities…" />
      <button id="reset" class="btn" title="Reset filters">Reset</button>
    </div>

    <div class="card">
      <div class="hd">Periods</div>
      <div id="periods" class="bd"></div>
    </div>

    <div class="card">
      <div class="hd">Categories</div>
      <div id="categories" class="bd"></div>
    </div>

    <div class="count" id="count">0 location(s) shown</div>
    <div id="list" class="list"></div>
  </aside>

  <div id="map"></div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin="">
  </script>

  <script>
    // --- Data model ---
    const PERIODS = ["Ancient","Medieval","Early Modern","Modern & Contemporary"];
    const CATEGORIES = ["Architecture","Sculpture","Painting","Craft","Institution","Festival"];

    const SITES = [
      {id:"ajanta",title:"Ajanta Caves",city:"Ajanta",state:"Maharashtra",lat:20.5519,lng:75.7033,period:"Ancient",categories:["Architecture","Painting","Sculpture"],summary:"UNESCO-listed rock‑cut Buddhist caves (2nd c. BCE–6th c. CE) famed for murals depicting Jataka tales and refined Gupta sculpture.",links:[{label:"UNESCO",url:"https://whc.unesco.org/en/list/242/"},{label:"Wikipedia",url:"https://en.wikipedia.org/wiki/Ajanta_Caves"}]},
      {id:"ellora",title:"Ellora Caves",city:"Ellora",state:"Maharashtra",lat:20.0268,lng:75.1793,period:"Early Modern",categories:["Architecture","Sculpture"],summary:"Monumental complex of Buddhist, Hindu, and Jain caves (6th–10th c. CE). Kailasa Temple (Cave 16) is a single‑rock marvel.",links:[{label:"UNESCO",url:"https://whc.unesco.org/en/list/243/"},{label:"Wikipedia",url:"https://en.wikipedia.org/wiki/Ellora_Caves"}]},
      {id:"sarnath",title:"Sarnath",city:"Varanasi",state:"Uttar Pradesh",lat:25.3763,lng:83.0217,period:"Ancient",categories:["Sculpture","Architecture"],summary:"Mauryan–Gupta site where the Lion Capital (India's state emblem) was found; key to early Buddhist art and Ashokan pillars."},
      {id:"khajuraho",title:"Khajuraho Temples",city:"Khajuraho",state:"Madhya Pradesh",lat:24.8318,lng:79.9199,period:"Medieval",categories:["Architecture","Sculpture"],summary:"Chandela‑era Hindu & Jain temples (10th–12th c.) with intricate narrative sculpture including celestial dancers and deities."},
      {id:"hampi",title:"Hampi (Vijayanagara)",city:"Hampi",state:"Karnataka",lat:15.335,lng:76.462,period:"Medieval",categories:["Architecture","Sculpture"],summary:"Ruins of Vijayanagara capital (14th–16th c.) showcasing Dravidian temple architecture, bazaars, and royal complexes."},
      {id:"konark",title:"Konark Sun Temple",city:"Konark",state:"Odisha",lat:19.8876,lng:86.0945,period:"Medieval",categories:["Architecture","Sculpture"],summary:"13th‑century Kalinga masterpiece in the form of Surya's chariot; famed for its stone wheels, dancers, and friezes."},
      {id:"bishnupur",title:"Bishnupur Terracotta Temples",city:"Bishnupur",state:"West Bengal",lat:23.0739,lng:87.3216,period:"Early Modern",categories:["Architecture","Craft"],summary:"Malla‑period temples (17th–18th c.) with rich terracotta panels depicting epics, courtly life, and devotional scenes."},
      {id:"udaipur",title:"Udaipur (Mewar Painting)",city:"Udaipur",state:"Rajasthan",lat:24.5854,lng:73.7125,period:"Early Modern",categories:["Painting"],summary:"A center of the Mewar school of Rajput painting noted for bold color, devotional themes, and court ateliers."},
      {id:"jaipur",title:"Jaipur (Amber & Kishangarh Schools)",city:"Jaipur",state:"Rajasthan",lat:26.9124,lng:75.7873,period:"Early Modern",categories:["Painting","Craft"],summary:"Rajput miniature hubs including Kishangarh's lyrical portraits and Jaipur's manuscript workshops and gemstone crafts."},
      {id:"thanjavur",title:"Thanjavur (Tanjore Paintings)",city:"Thanjavur",state:"Tamil Nadu",lat:10.7867,lng:79.1378,period:"Early Modern",categories:["Painting","Craft"],summary:"Distinctive devotional panels with gold leaf and inlay, developed under the Maratha court; famed for luminous iconography."},
      {id:"lucknow",title:"Lucknow (Company School)",city:"Lucknow",state:"Uttar Pradesh",lat:26.8467,lng:80.9462,period:"Early Modern",categories:["Painting"],summary:"Company style painting blended Indian techniques with European naturalism in late 18th–19th c. Nawabi ateliers."},
      {id:"santiniketan",title:"Santiniketan (Kala Bhavana)",city:"Bolpur",state:"West Bengal",lat:23.6775,lng:87.6844,period:"Modern & Contemporary",categories:["Institution","Painting","Sculpture"],summary:"Tagore's Visva‑Bharati art school shaped modern Indian art via Nandalal Bose, Ramkinkar Baij, and the Bengal School."},
      {id:"baroda",title:"Vadodara (MSU Faculty of Fine Arts)",city:"Vadodara",state:"Gujarat",lat:22.3072,lng:73.1812,period:"Modern & Contemporary",categories:["Institution","Painting","Sculpture"],summary:"A key post‑Independence art school nurturing Baroda Group artists, new figuration, and critical theory in practice."},
      {id:"mumbai",title:"Mumbai (Progressive Artists' Group)",city:"Mumbai",state:"Maharashtra",lat:19.076,lng:72.8777,period:"Modern & Contemporary",categories:["Institution","Painting"],summary:"Epicenter for PAG (1947–56) — Souza, Raza, Husain — advancing modernism, galleries, and Bombay's art market."},
      {id:"delhi",title:"New Delhi (NGMA & Triveni)",city:"New Delhi",state:"Delhi",lat:28.6139,lng:77.209,period:"Modern & Contemporary",categories:["Institution"],summary:"National Gallery of Modern Art and Triveni Kala Sangam anchor national collections, pedagogy, and contemporary practice."},
      {id:"cholamandal",title:"Cholamandal Artists' Village",city:"Chennai",state:"Tamil Nadu",lat:12.8714,lng:80.2276,period:"Modern & Contemporary",categories:["Institution","Painting","Sculpture"],summary:"Artist‑run commune (since 1966) that sustained Madras Art Movement and K.C.S. Paniker's experimentation."},
      {id:"kochi",title:"Kochi‑Muziris Biennale",city:"Kochi",state:"Kerala",lat:9.9312,lng:76.2673,period:"Modern & Contemporary",categories:["Festival","Institution"],summary:"India's largest contemporary art biennale (since 2012), activating colonial warehouses and public spaces across Kochi."},
      {id:"srinagar",title:"Srinagar (Kashmiri Crafts)",city:"Srinagar",state:"Jammu & Kashmir",lat:34.0837,lng:74.7973,period:"Early Modern",categories:["Craft","Painting"],summary:"Center for pashmina, papier‑mâché, wood carving and a Mughal‑inflected painting tradition in the Himalayan valley."},
      {id:"nalanda",title:"Nalanda (Monastic University)",city:"Nalanda",state:"Bihar",lat:25.1367,lng:85.4436,period:"Ancient",categories:["Institution","Architecture","Sculpture"],summary:"Buddhist mahavihara (5th–12th c.) influential across Asia; terracotta and stucco art with scholastic networks."}
    ];

    // --- App state ---
    const state = {
      query: "",
      periods: new Set(),
      cats: new Set(),
      selectedId: null
    };

    // --- Map ---
    const map = L.map('map', { zoomControl: true }).setView([22.9734, 78.6569], 5);
    const osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    const markers = new Map();

    function clearMarkers(){
      markers.forEach(m => map.removeLayer(m));
      markers.clear();
    }

    function addMarkers(sites){
      sites.forEach(site => {
        // Create custom icon for better visual appeal
        const customIcon = L.divIcon({
          className: 'custom-marker',
          html: `<div style="
            width: 20px; 
            height: 20px; 
            background: linear-gradient(135deg, #5b8cff, #7dd3fc);
            border: 3px solid #fff;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            cursor: pointer;
          "></div>`,
          iconSize: [20, 20],
          iconAnchor: [10, 10]
        });

        const m = L.marker([site.lat, site.lng], { icon: customIcon }).addTo(map);
        const links = (site.links||[]).map(l => `<a href="${l.url}" target="_blank" rel="noreferrer">${l.label}</a>`).join(' • ');
        m.bindPopup(`
          <div style="width:240px">
            <div style="font-weight:700">${site.title}</div>
            <div style="font-size:12px;color:#9aa4bf">${site.city}, ${site.state}</div>
            <div style="font-size:12px;margin-top:4px">${site.summary}</div>
            <div style="margin-top:6px;font-size:11px">${links}</div>
            <button class="focus-btn" onclick="focusOn('${site.id}')">Focus here</button>
          </div>
        `);
        markers.set(site.id, m);
      });
    }

    window.focusOn = function(id){
      const site = SITES.find(s => s.id === id);
      if(!site) return;
      map.flyTo([site.lat, site.lng], 6);
      const m = markers.get(id);
      if(m){ m.openPopup(); }
      state.selectedId = id;
      highlightSelected();
    }

    function highlightSelected(){
      document.querySelectorAll('.site').forEach(el => {
        el.style.outline = el.dataset.id === state.selectedId ? '2px solid var(--primary)' : '1px solid var(--outline)';
      });
    }

    // --- Filters UI ---
    const periodsEl = document.getElementById('periods');
    const catsEl = document.getElementById('categories');
    const listEl = document.getElementById('list');
    const countEl = document.getElementById('count');
    const searchEl = document.getElementById('search');
    const resetEl = document.getElementById('reset');

    function chip(label, set, onToggle){
      const el = document.createElement('div');
      el.className = 'chip';
      el.textContent = label;
      el.onclick = () => {
        if(set.has(label)) set.delete(label); else set.add(label);
        el.classList.toggle('active');
        render();
      };
      return el;
    }

    PERIODS.forEach(p => periodsEl.appendChild(chip(p, state.periods)));
    CATEGORIES.forEach(c => catsEl.appendChild(chip(c, state.cats)));

    searchEl.addEventListener('input', (e) => {
      state.query = e.target.value.toLowerCase();
      render();
    });

    resetEl.addEventListener('click', () => {
      state.query = "";
      state.periods.clear();
      state.cats.clear();
      state.selectedId = null;
      searchEl.value = "";
      document.querySelectorAll('.chip.active').forEach(el => el.classList.remove('active'));
      render(true);
    });

    function filterSites(){
      return SITES.filter(s => {
        const q = state.query;
        const matchesQ = q ? [s.title, s.city, s.state, s.summary].some(t => t.toLowerCase().includes(q)) : true;
        const matchesP = state.periods.size ? state.periods.has(s.period) : true;
        const matchesC = state.cats.size ? s.categories.some(c => state.cats.has(c)) : true;
        return matchesQ && matchesP && matchesC;
      });
    }

    function render(scrollTop){
      const sites = filterSites();
      countEl.textContent = sites.length + " location(s) shown";

      // list
      listEl.innerHTML = "";
      sites.forEach(site => {
        const row = document.createElement('div');
        row.className = 'site';
        row.dataset.id = site.id;
        row.innerHTML = `
          <div style="min-width:0;width:100%">
            <div class="name">${site.title} <span class="badge">${site.period}</span></div>
            <div class="meta">${site.city}, ${site.state}</div>
            <div style="font-size:13px;margin-top:4px">${site.summary}</div>
            <div class="badges">${site.categories.map(c => `<span class="badge">${c}</span>`).join(' ')}</div>
          </div>`;
        row.onclick = () => { window.focusOn(site.id); };
        listEl.appendChild(row);
      });

      if(scrollTop) listEl.scrollTop = 0;

      // markers
      clearMarkers();
      addMarkers(sites);

      // keep highlight if selection still visible
      if(state.selectedId && sites.some(s => s.id === state.selectedId)) highlightSelected();
      else state.selectedId = null;
    }

    render(true);
  </script>
</body>
</html>
